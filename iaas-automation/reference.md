# 参考

## 制限事項

リージョンにより対応していないサービスがあります。
- メール配信サービス
- 専用物理サーバ
- 専用物理ストレージ(専用物理サーバのオプション)

以下のサービスは、一部手動運用が必要になります。
- DNSサービスのゾーン作成
- メール配信

DNSサービスを利用するにはサービスを利用するユーザがリージョン「jp-east-1」にあるプロジェクトに登録されている必要があります。

## 注意事項

リソースを作成する関係から、プロジェクト毎のリソース上限(クォーター制限)によってエラーが発生する場合があります。
特にSSL-VPNコネクション作成時にはセキュリティグループのルールが暗黙的に作成される為、注意して下さい。
クォーター制限については機能説明書を参照して下さい。

## 実装サンプルの各工程の入出力表

実装サンプル上の各工程における、必要な入出力についての一覧を以下に示します。
あくまで実装サンプルの場合の例のため、連携ツールの作り方次第では、過不足が出る可能性がありますので注意して下さい。

**太字** は利用者側での入力が必要な値になります。そうでないものは、K5やツール側で自動的に生成もしくは取得するものになります。

工程                    | 入力                     | 出力
:-------------------- | :--------------------- | :-----------------
認証(API) | **アカウント情報**<br>**リージョン情報** | トークン<br>カタログ<br>プロジェクトID
外部ネットワーク名取得(API) | **AZ情報** | SSL-VPN用外部ネットワーク名
外部ネットワークID取得(API) | SSL-VPN用外部ネットワーク名 | SSL-VPN用外部ネットワークID
DNSサーバリスト取得(非API) | **AZ情報** | DNSサーバリスト
キーペアの作成(API) | トークン<br>カタログ<br>**キーペア名**<br>**AZ情報** | サーバ用秘密鍵(のパス)
スタックの作成(API) | トークン<br>カタログ<br>**キーペア名**<br>**ターゲットスタック名**<br>**SSL-VPNクライアントサブネットCIDR**<br>**HOTファイル**<br>**HOT用パラメータ**   | スタックID
スタックの更新(API) | トークン<br>カタログ<br>**キーペア名**<br>**ターゲットスタック名**<br>スタックID<br>SSL-VPN用外部ネットワーク名<br>SSL-VPN用外部ネットワークID<br>**SSL-VPNクライアントサブネットCIDR**<br>**HOTファイル**<br>**HOT用パラメータ** | スタックID
SSL-VPN用ネットワークID取得(API) | トークン<br>カタログ<br>スタックID<br>**SSL-VPN用ネットワークリソース名** | SSL-VPN用ネットワークID
SSL-VPN用サブネットID取得(API) | トークン<br>カタログ<br>スタックID<br>**SSL-VPN用サブネットリソース名** | SSL-VPN用サブネットID
SSL-VPN用サブネットCIDR取得(API) | トークン<br>カタログ<br>SSL-VPN用ルータID | SSL-VPN用サブネットCIDR
SSL-VPN用ルータID取得(API) | トークン<br>カタログ<br>スタックID<br>**SSL-VPN用ルータリソース名** | SSL-VPN用ルータID
SSL-VPN用ルータポートID取得(API) | トークン<br>カタログ<br>スタックID<br>**SSL-VPN用ルータポートリソース名** | SSL-VPN用ルータポートID
SSL-VPN用ルータポートIP取得(API) | トークン<br>カタログ<br>SSL-VPN用ルータポートID | SSL-VPN用ルータポートIP
構成管理ツール用キーペアの作成(API) | トークン<br>カタログ<br>**構成管理ツール用キーペア名**<br>**AZ情報** | 構成管理ツール用秘密鍵(のパス)
構成管理ツール用スタックの作成(API) | トークン<br>カタログ<br>**構成管理ツール用スタック名**<br>**SSL-VPNクライアントサブネットCIDR**<br>SSL-VPN用ネットワークID<br>SSL-VPN用サブネットCIDR<br>SSL-VPN用サブネットID<br>**構成管理ツール用キーペア名**<br>**構成管理ツール用HOTファイル** <br>**構成管理ツール用HOT用パラメータ** |
SSL-VPN用鍵情報の作成(非API) | **OpenSSL設定ファイルパス**<br>**各証明書のサブジェクト**<br>**ファイルの出力先** | 鍵情報ファイル(のパス)
SSL-VPN用鍵情報の登録(API) | トークン<br>カタログ<br>プロジェクトID<br>鍵情報ファイル(のパス) | 登録鍵情報URL
SSL-VPN用鍵コンテナの作成(API) | トークン<br>カタログ<br>プロジェクトID<br>登録鍵情報URL | 鍵情報コンテナURL
SSL-VPNサービスの作成(API) | トークン<br>カタログ<br>**AZ情報**<br>SSL-VPN用サブネットID<br>SSL-VPN用ルータID | SSL-VPNサービスID
SSL-VPNコネクションの作成(API) | トークン<br>カタログ<br>**AZ情報**<br>SSL-VPNサービスID<br>**SSL-VPNクライアントサブネットCIDR** | SSL-VPNコネクションID<br>SSL-VPN接続アドレス
SSL-VPN接続用設定ファイル作成(非API) | SSL-VPNコネクションID<br>SSL-VPN接続アドレス<br>鍵情報ファイル(のパス) | SSL-VPN接続用設定ファイル(のパス)
SSL-VPN接続(非API) | SSL-VPN接続用設定ファイル(のパス) |
SSL-VPN接続確認(非API) | SSL-VPN用ルータポートIP |
構成管理ツール用サーバID取得(API) | **構成管理ツール用スタック名**<br>**構成管理ツール用サーバのポートのリソース名** | 構成管理ツール用サーバポートID
構成管理ツール用サーバIP取得(API) | 構成管理ツール用サーバポートID<br>SSL-VPN用サブネットID | 構成管理ツール用サーバポートIP
WEBサーバSSL-VPN側ポートID取得(API) | **ターゲットスタック名**<br>**WEBサーバのSSL-VPN側ポートのリソース名** | WEBサーバSSL-VPN側ポートID
WEBサーバSSL-VPN側ポートIP取得(API) | WEBサーバSSL-VPN側ポートID<br>SSL-VPN用サブネットID | WEBサーバSSL-VPN側ポートIP
APPサーバサービス側サブネットID取得(API) | **ターゲットスタック名**<br>**APPサーバのサービス側サブネットのリソース名** | サービス用サブネットID
APPサーバサービス側ポートID取得(API) | **ターゲットスタック名**<br>**APPサーバのサービス側ポートのリソース名** | APPサーバサービス側ポートID
APPサーバサービス側ポートIP取得(API) | APPサーバサービス側ポートID<br>サービス用サブネットID | APPサーバサービス側ポートIP
WEBサーバのセットアップ(非API) | **OSセットアップ設定情報(プレイブックを含む)**<br>WEBサーバSSL-VPN側ポートIP<br>APPサーバサービス側ポートIP<br>構成管理ツール用サーバポートIP<br>構成管理ツール用秘密鍵<br>サーバ用秘密鍵(のパス)<br>構成管理ツール用秘密鍵(のパス)<br>**構成管理ツール実行用パラメータ** |
APPサーバSSL-VPN側ポートID取得(API) | **ターゲットスタック名**<br>**APPサーバのSSL-VPN側ポートのリソース名** | APPサーバSSL-VPN側ポートID
APPサーバSSL-VPN側ポートIP取得(API) | APPサーバSSL-VPN側ポートID<br>SSL-VPN用サブネットID | APPサーバSSL-VPN側ポートIP
DBサーバID取得(API) | **ターゲットスタック名**<br>**DBサーバのリソース名** | DBサーバID
DBサーバIP取得(API) | DBサーバID | DBサーバアドレス
APPサーバのセットアップ(非API) | **OSセットアップ設定情報(プレイブックを含む)**<br>APPサーバSSL-VPN側ポートIP<br>DBサーバアドレス<br>構成管理ツール用サーバポートIP<br>構成管理ツール用秘密鍵<br>サーバ用秘密鍵(のパス)<br>構成管理ツール用秘密鍵(のパス)<br>**構成管理ツール実行用パラメータ** |
DBサーバへのデータ投入(非API)※APPサーバ経由 | **DBデータ投入情報(プレイブックを含む)**<br>APPサーバSSL-VPN側ポートIP<br>構成管理ツール用サーバポートIP<br>構成管理ツール用秘密鍵<br>サーバ用秘密鍵(のパス)<br>構成管理ツール用秘密鍵(のパス)<br>**構成管理ツール実行用パラメータ**<br>DBサーバアドレス<br>**DBサーバのリッスンポート**<br>**データベース名**<br>**データベースのユーザ名**<br>**データベースのユーザのパスワード** |
