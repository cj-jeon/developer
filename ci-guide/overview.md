## 概要

### 1. CI ( 継続的インテグレーション ) について

チーム開発において開発資産統合時に問題が発生することは、プロジェクトの進捗や結果に大きく影響を与えます。<br/>
また、手動でビルドやテストを頻繁に繰り返すことは開発者に負担をかけ、プロジェクト全体に非効率化をもたらします。<br/>
これらの問題を解消させるために、CI（継続的インテグレーション）を導入し、実践します。<br/>
CI環境を構築することで、ビルド・テスト・デプロイを自動化することができ、開発者の負担を軽減します。このプロセスを何度も繰り返し、不具合などを早期に発見し、品質改善や納期の短縮を実現することが可能になります。<br/>

### 2.CI環境の構成

本ガイドでは、想定する利用シナリオにあわせたCI環境をK5上に構築し、CIを実現します。

------------------------------------------------------------------------------------------------

#### 基本システム構成

K5上でCI環境を構築するための基本システムを紹介します。<br/>
以下のシステムを基本とし、実際の利用シーンにあわせて構成を変更していきます。<br/>

 名称                             | 詳細
:-------------------------------- | :--------------------------------
仮想サーバ                        | K5上に仮想サーバを構築します。
構成管理ツール                    | K5提供の「GitHubEnterprise」を利用します。
公開用サーバ (実行基盤)           | K5提供のCFの利用。
CIツール                          | 使用したいツールを選択し、仮想サーバへ導入
テストツール                      | 使用したいツールを選択し、仮想サーバへ導入

中核となるシステム構成要素の動きは以下の通りです。<br/>
- 構成管理ツールで開発資産を管理
- 仮想サーバへ導入したCIツールを通じてCI実施
- 公開用サーバ（実行基盤）へデプロイ <br/>

【基本システム構成図 】<br/>
  ![CI_01](./image/ci_00.jpg)
　<br/>



#### 想定利用シナリオ<a name="scenario"></a><br/>

利用シナリオとして 「 チーム開発で静的ウェブページを作成し公開する 」 ことを想定します。

>■ 登場人物<br/>
>　管理者と開発チーム<br/>
>　・ 管理者（権限管理者、本番環境デプロイ責任者）･･･１名<br/>
>　・ 開発チーム・・・開発機能ごとに複数のチームに分かれます。<br/>
>
>
>■ 想定する開発内容<br/>
>　ページの修正・追加を継続的にすばやく行えるようにします。<br/>
>　開発ツールとして静的ページジェネレーター「Hexo」を使用します。<br/>
>
>
>■ 開発の流れ<br/>
>　開発チームによる作業<br/>
>　　開発ツール「Hexo」を利用して、Markdown形式で記事を作成し、Html形式の静的ページを生成します。<br/>
>　　開発した資産をテストサーバにデプロイします。<br/>
>　　開発資産形成の各段階で構文チェックテストやアタックテストなどを行い、品質管理も実施します。<br/>
>　　チーム担当分の開発作業が完了したら管理者へレビュー依頼を出します。<br/>
>　<br/>
>　管理者による作業<br/>
>　　レビュー結果がOKであるならば、資産を統合し、本番環境へデプロイします。<br/>
>　　品質管理を徹底させるため資産統合後も再度各種テストを行ったうえで本番環境へデプロイします。<br/>
>
>
>■ シナリオの目標<br/>
>CI ( 継続的インテグレーション ) を実施したい。<br/>
>　　チーム開発での効率的な資産管理を行い、テスト自動化と通知機能を活用し、<br/>
>　　制作から公開までの期間短縮と開発作業の負担軽減をめざします。<br/>
>
>具体的には、開発チームによる作業においては、実質 `MDファイル作成` のみを行い、CIを導入することで、以下の流れの自動化をめざします。<br/>
>　　　` MD構文チェック → HTML生成 → HTML構文チェック → テストサーバーデプロイ → `<br/>
>　　　` → アタックテスト → レビュー依頼`<br/>
>

　<br/>

#### 想定利用シナリオを基にしたシステム構成

想定利用シナリオにふさわしいCI環境を構築するシステムの構成です。<br/>
本ガイドで構築するCI環境はFUJITSU Cloud Service K5を利用し、以下のシステム、各種ツールを使用しています。<br/>

K5提供サービス 名称               | 詳細
:-------------------------------- | :--------------------------------
CentOS (仮想マシン)               | CentOS 7.x 64bit 英語版
GitHubEnterprise(構成管理ツール ) | K5 提供サービス
CF (実行基盤)                     | K5提供のアプリケーション実行環境サービス

各種ツール 名称                   | 詳細
:-------------------------------- | :--------------------------------
Jenkins                           | CIツール  Jenkins 2.0以上
Hexo                              | 静的ページジェネレーター
Markdownlint                      | Markdown構文チェックツール
Htmlhint                          | Html構文チェックツール
Skipfish                          | セキュリティ調査ツール

　<br/>

#### システム構成図とシナリオ運用概要図

K5の各種サービスとツールを組み合わせたCI環境のシステム構成図は以下の通りです。<br/>

【システム構成図 】<br/>
  ![CI_01](./image/ci_01.jpg)
　<br/>

想定利用シナリオでCI環境を運用した概要図です。<br/>
詳しくは第7章、8章で構築手順を示しながら紹介します。<br/>

【シナリオ運用概要図 】<a name="ci_02"></a><br/>
  ![CI_02](./image/ci_02.jpg)
  ![CI_03](./image/ci_03.jpg)
